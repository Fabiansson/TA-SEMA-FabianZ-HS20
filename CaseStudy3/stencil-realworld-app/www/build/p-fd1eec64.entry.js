import{r as t,h as s}from"./p-169f3d6f.js";import"./p-3daa696c.js";import{d as i}from"./p-4a359652.js";import{c as o,d as e}from"./p-0cc6b70d.js";const r=class{constructor(s){t(this,s),this.followAuthor=()=>this.followFavorite(!0),this.favoriteArticle=()=>this.followFavorite(!1),this.deleteArticle=async()=>{window.confirm("Are you sure you want to delete this article?")&&(await i(this.article.slug,this.user&&this.user.token),this.history.push("/profile/"+this.user.username))}}render(){const{author:{username:t,image:i,following:o},updatedAt:e,slug:r,favorited:a,favoritesCount:n}=this.article,l=this.user&&t===this.user.username;return s("div",{class:"article-meta"},s("stencil-route-link",{url:"/profile/"+t},s("img",{src:i,alt:"author image"})),s("div",{class:"info"},s("stencil-route-link",{url:"/profile/"+t,anchorClass:"author"},t),s("span",{class:"date"},new Date(e).toLocaleDateString("en",{month:"long",day:"2-digit",year:"numeric"}))),l?[s("stencil-route-link",{anchorClass:"btn btn-outline-secondary btn-sm",url:"/editor/"+r},s("ion-icon",{name:"ion-edit"})," Edit Article"),s("button",{class:"btn btn-outline-danger btn-sm","aria-label":"Click to delete this article",onClick:this.deleteArticle},s("ion-icon",{name:"ion-trash-a"})," Delete Article")]:this.user&&[s("button",{class:"btn btn-sm "+(o?"btn-outline-secondary":"btn-secondary"),"aria-label":"Click to follow "+t,onClick:this.followAuthor},!o&&s("ion-icon",{name:"ion-plus-round"}),"  ",o?"Unfollow":"Follow"," ",t),s("button",{class:"btn btn-sm "+(a?"btn-primary":"btn-outline-primary"),"aria-label":"Click to favorite this article",onClick:this.favoriteArticle},s("ion-icon",{name:"heart"}),"  ",a?"Unfavorite":"Favorite"," Article ",s("span",{class:"counter"},"(",n,")"))])}},a=class{constructor(s){t(this,s),this.body="",this.disabled=!1,this.handleSubmit=async t=>{if(t.preventDefault(),!this.user)return;this.disabled=!0;const s=await o(this.slug,this.body,this.user.token),{comment:i,errors:e,success:r}=s;r?(this.body="",this.addComment(i)):this.errors=e,this.disabled=!1},this.handleChange=t=>{this.body=t.target.value}}render(){return this.errors?s("error-display",{errors:this.errors}):this.user?s("form",{class:"card comment-form",onSubmit:this.handleSubmit},s("fieldset",{disabled:this.disabled},s("div",{class:"card-block"},s("textarea",{class:"form-control",placeholder:"Write a comment...",rows:3,value:this.body,onInput:this.handleChange,required:!0})),s("div",{class:"card-footer"},s("img",{src:this.user.image,class:"comment-author-img",alt:"comment author image"}),s("button",{class:"btn btn-sm btn-primary",type:"submit"},"Post Comment")))):s("p",null,"Please ",s("stencil-route-link",{url:"/login"},"sign in")," or ",s("stencil-route-link",{url:"/register"},"register")," to comment.")}},n=class{constructor(s){t(this,s),this.deleteComment=async()=>{const{user:t,comment:s,slug:i}=this;t&&t.username===s.author.username&&window.confirm("Are you sure you want to delete your comment?")&&(await e(i,s.id,t.token)).success&&this.removeComment(s.id)}}render(){const{author:t,body:i,updatedAt:o}=this.comment,e="/profile/"+t.username;return s("div",{class:"card"},s("div",{class:"card-block"},s("p",{class:"card-text"},i)),s("div",{class:"card-footer"},s("stencil-route-link",{url:e,anchorClass:"comment-author"},s("img",{class:"comment-author-img",src:t.image,alt:"comment author image"}))," ",s("stencil-route-link",{url:e,anchorClass:"comment-author"},t.username),s("span",{class:"date-posted"},"Dec 29th"),s("span",{class:"date-posted"},new Date(o).toLocaleDateString("en",{month:"short",day:"numeric"})),this.user&&this.user.username===t.username&&s("span",{class:"mod-options"},s("button",{"aria-label":"Button to delete your comment",onClick:this.deleteComment},s("ion-icon",{name:"ion-trash-a"})))))}};export{r as article_meta,a as comment_form,n as single_comment}