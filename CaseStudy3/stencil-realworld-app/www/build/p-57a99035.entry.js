import{r as t,h as s}from"./p-169f3d6f.js";import"./p-3daa696c.js";import{u as i,c as e,g as r}from"./p-4a359652.js";const o=[{id:"title",placeholder:"Article Title",required:!0,large:!0},{id:"description",placeholder:"What's this article about",required:!0},{id:"body",placeholder:"Write your article (in markdown)",isTextArea:!0,required:!0},{id:"tags",placeholder:"Enter tags (separated by comma)",required:!0}],a=class{constructor(s){t(this,s),this.title="",this.description="",this.body="",this.tags="",this.disabled=!1,this.isLoading=!1,this.handleChange=t=>{const s=t.target.getAttribute("data-settings-id"),i=t.target.value;s&&i&&(this[s]=i)},this.handleSubmit=async t=>{this.disabled=!0,t.preventDefault();const{user:s,article:r,title:o,description:a,body:l,tags:c}=this;if(!(s&&o&&a&&l))return void(this.disabled=!1);const n={title:o,description:a,body:l,tagList:c.split(",").map((t=>t.trim()))},d=r?await i({slug:r.slug,token:s&&s.token,article:r}):await e(n,s.token),{success:h,errors:u}=d;h?this.history.push("/article/"+d.article.slug):this.errors=u,this.disabled=!1}}componentWillLoad(){const{slug:t}=this.match.params;t&&(this.isLoading=!0)}async componentDidLoad(){document.title="Editor - Stencil Conduit";const{slug:t}=this.match.params;if(t&&this.isLoading){const s=await r(t,this.user&&this.user.token),{success:i,article:e,errors:o}=s;i?(this.article=e,this.title=e.title,this.description=e.description,this.body=e.body,this.tags=e.tagList.join(" , ")):this.errors=o,this.isLoading=!1}}render(){return this.isLoading?s("loading-spinner",null):this.errors?[s("h1",null,"Something went wrong"),s("error-display",{errors:this.errors})]:s("main",{class:"editor-page"},s("div",{class:"container page"},s("div",{class:"row"},s("div",{class:"col-md-10 offset-md-1 col-xs-12"},s("form",{onSubmit:this.handleSubmit},s("fieldset",{disabled:this.disabled},o.map((t=>{const i={class:"form-control "+(t.large?"form-control-lg":""),placeholder:t.placeholder,type:"text",value:this[t.id],onInput:this.handleChange,required:t.required||!1,"data-settings-id":t.id};return s("fieldset",{class:"form-group"},t.isTextArea?s("textarea",Object.assign({},i,{rows:8})):s("input",Object.assign({},i)))})),s("button",{class:"btn btn-lg pull-xs-right btn-primary",type:"submit"},"Publish Article")))))))}};export{a as editor_page}