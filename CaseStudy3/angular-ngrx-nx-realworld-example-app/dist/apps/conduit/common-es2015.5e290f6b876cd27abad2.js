(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"2Mw2":function(t,e,i){"use strict";i.d(e,"b",function(){return s}),i.d(e,"a",function(){return r});var c=i("ofXK"),n=i("A47K"),a=i("fXoL");let r=(()=>{class t{constructor(t){this.apiService=t}followUser(t){return this.apiService.post("/profiles/"+t+"/follow",null)}unfollowUser(t){return this.apiService.delete("/profiles/"+t+"/follow")}favorite(t){return this.apiService.post("/articles/"+t+"/favorite",null)}unfavorite(t){return this.apiService.delete("/articles/"+t+"/favorite")}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(n.b))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac}),t})(),s=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},providers:[r],imports:[[c.c]]}),t})()},CWEr:function(t,e,i){"use strict";i.d(e,"b",function(){return C}),i.d(e,"c",function(){return L.b}),i.d(e,"d",function(){return j.g}),i.d(e,"a",function(){return h.a});var c=i("2Mw2"),n=i("ofXK"),a=i("tyNb"),r=i("9jGm"),s=i("l7P3"),o=i("LRne"),l=i("lJxs"),b=i("zp1y"),u=i("bOdf"),g=i("JIr8"),f=i("A47K"),d=i("tk/3"),p=i("fXoL");let O=(()=>{class t{constructor(t){this.apiService=t}query(t){return this.apiService.get("/articles"+("FEED"===t.type?"/feed":""),this.toHttpParams(t.filters))}toHttpParams(t){return Object.getOwnPropertyNames(t).reduce((e,i)=>e.set(i,t[i]),new d.f)}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(f.b))},t.\u0275prov=p.Db({token:t,factory:t.\u0275fac}),t})();var j=i("r9Q6"),h=i("j47y");let v=(()=>{class t{constructor(t,e,i,c){this.actions$=t,this.articleListService=e,this.actionsService=i,this.facade=c,this.setListPage=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(j.h),Object(l.a)(()=>j.d()))),this.setListTag=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(j.g),Object(l.a)(()=>j.d()))),this.loadArticles=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(j.d),Object(b.a)(this.facade.listConfig$),Object(u.a)(([t,e])=>this.articleListService.query(e).pipe(Object(l.a)(t=>j.f({articles:t.articles,articlesCount:t.articlesCount})),Object(g.a)(t=>Object(o.a)(j.e({error:t}))))))),this.favorite=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(j.a),Object(l.a)(t=>t.slug),Object(u.a)(t=>this.actionsService.favorite(t).pipe(Object(l.a)(t=>j.c({article:t.article})),Object(g.a)(t=>Object(o.a)(j.b(t))))))),this.unFavorite=Object(r.c)(()=>this.actions$.pipe(Object(r.d)(j.i),Object(l.a)(t=>t.slug),Object(u.a)(t=>this.actionsService.unfavorite(t).pipe(Object(l.a)(t=>j.k({article:t.article})),Object(g.a)(t=>Object(o.a)(j.j(t)))))))}}return t.\u0275fac=function(e){return new(e||t)(p.Pb(r.a),p.Pb(O),p.Pb(c.a),p.Pb(h.a))},t.\u0275prov=p.Db({token:t,factory:t.\u0275fac}),t})();var L=i("hZaa");let C=(()=>{class t{}return t.\u0275mod=p.Fb({type:t}),t.\u0275inj=p.Eb({factory:function(e){return new(e||t)},providers:[O,v,h.a],imports:[[n.c,c.b,a.h,s.j.forFeature(L.a,L.c,{initialState:L.b}),r.b.forFeature([v])]]}),t})()},hZaa:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return r}),i.d(e,"c",function(){return l});var c=i("l7P3"),n=i("r9Q6");const a="article",r={listConfig:{type:"ALL",currentPage:1,filters:{limit:10}},articles:{entities:[],articlesCount:0,loaded:!1,loading:!1}},s=Object(c.p)(r,Object(c.r)(n.h,(t,e)=>{const i=Object.assign(Object.assign({},t.listConfig.filters),{offset:t.listConfig.filters.limit*(e.page-1)}),c=Object.assign(Object.assign({},t.listConfig),{currentPage:e.page,filters:i});return Object.assign(Object.assign({},t),{listConfig:c})}),Object(c.r)(n.g,(t,e)=>Object.assign(Object.assign({},t),{listConfig:e.config})),Object(c.r)(n.d,(t,e)=>{const i=Object.assign(Object.assign({},t.articles),{loading:!0});return Object.assign(Object.assign({},t),{articles:i})}),Object(c.r)(n.f,(t,e)=>{const i=Object.assign(Object.assign({},t.articles),{entities:e.articles,articlesCount:e.articlesCount,loading:!1,loaded:!0});return Object.assign(Object.assign({},t),{articles:i})}),Object(c.r)(n.e,(t,e)=>{const i=Object.assign(Object.assign({},t.articles),{entities:[],articlesCount:0,loading:!1,loaded:!0});return Object.assign(Object.assign({},t),{articles:i})}),Object(c.r)(n.k,n.c,(t,e)=>Object.assign(Object.assign({},t),{articles:o(t.articles,e.article)})));function o(t,e){const i=t.entities.findIndex(t=>t.slug===e.slug),c=[...t.entities.slice(0,i),Object.assign({},t.entities[i],e),...t.entities.slice(i+1)];return Object.assign(Object.assign({},t),{entities:c,loading:!1,loaded:!0})}function l(t,e){return s(t,e)}},j47y:function(t,e,i){"use strict";i.d(e,"a",function(){return g});var c=i("l7P3"),n=i("hZaa");const a=Object(c.o)(n.a),r={getListConfig:Object(c.q)(a,t=>t.listConfig),getArticles:Object(c.q)(a,t=>t.articles.entities),getArticlesCount:Object(c.q)(a,t=>t.articles.articlesCount),isLoading:Object(c.q)(a,t=>t.articles.loading)};var s=i("r9Q6"),o=i("zp1y"),l=i("lJxs"),b=i("EdWO"),u=i("fXoL");let g=(()=>{class t{constructor(t){this.store=t,this.articles$=this.store.select(r.getArticles),this.listConfig$=this.store.select(r.getListConfig),this.isLoading$=this.store.select(r.isLoading),this.articlesCount$=this.store.select(r.getArticlesCount),this.totalPages$=this.articlesCount$.pipe(Object(o.a)(this.listConfig$),Object(l.a)(([t,e])=>Array.from(new Array(Math.ceil(t/e.filters.limit)),(t,e)=>e+1)))}favorite(t){this.store.dispatch(s.a({slug:t}))}unFavorite(t){this.store.dispatch(s.i({slug:t}))}navigateToArticle(t){this.store.dispatch(Object(b.b)({to:{path:["/article",t]}}))}setPage(t){this.store.dispatch(s.h({page:t}))}setListConfig(t){this.store.dispatch(s.g({config:t}))}}return t.\u0275fac=function(e){return new(e||t)(u.Pb(c.h))},t.\u0275prov=u.Db({token:t,factory:t.\u0275fac}),t})()},qm0p:function(t,e,i){"use strict";i.d(e,"a",function(){return p});var c=i("j47y"),n=i("fXoL"),a=i("ofXK");const r=function(t){return{active:t}};function s(t,e){if(1&t){const t=n.Mb();n.Lb(0,"li",2),n.Sb("click",function(){n.dc(t);const i=e.$implicit;return n.Ub().setPage.emit(i)}),n.Lb(1,"a",3),n.ic(2),n.Kb(),n.Kb()}if(2&t){const t=e.$implicit,i=n.Ub();n.Yb("ngClass",n.ac(2,r,t===i.currentPage)),n.xb(2),n.jc(t)}}let o=(()=>{class t{constructor(){this.setPage=new n.n}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Bb({type:t,selectors:[["app-pager"]],inputs:{currentPage:"currentPage",totalPages:"totalPages"},outputs:{setPage:"setPage"},decls:2,vars:1,consts:[[1,"pagination"],["class","page-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass","click"],[1,"page-link"]],template:function(t,e){1&t&&(n.Lb(0,"ul",0),n.hc(1,s,3,4,"li",1),n.Kb()),2&t&&(n.xb(1),n.Yb("ngForOf",e.totalPages))},directives:[a.k,a.j],styles:[".page-link[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),t})();var l=i("tyNb");function b(t,e){if(1&t&&(n.Lb(0,"li",11),n.ic(1),n.Kb()),2&t){const t=e.$implicit;n.xb(1),n.kc(" ",t," ")}}const u=function(t){return["/profile",t]},g=function(t,e){return{"btn-outline-primary":t,"btn-primary":e}};let f=(()=>{class t{constructor(){this.favorite=new n.n,this.unFavorite=new n.n,this.navigateToArticle=new n.n}toggleFavorite(t){t.favorited?this.unFavorite.emit(t.slug):this.favorite.emit(t.slug)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Bb({type:t,selectors:[["app-article-list-item"]],inputs:{article:"article"},outputs:{favorite:"favorite",unFavorite:"unFavorite",navigateToArticle:"navigateToArticle"},decls:23,vars:17,consts:[[1,"article-preview"],[1,"article-meta"],[3,"src"],[1,"info"],[1,"author",3,"routerLink"],[1,"date"],[1,"btn","btn-sm","pull-xs-right",3,"ngClass","click"],[1,"ion-heart"],[1,"preview-link",3,"click"],[1,"tag-list"],["class","tag-default tag-pill tag-outline",4,"ngFor","ngForOf"],[1,"tag-default","tag-pill","tag-outline"]],template:function(t,e){1&t&&(n.Lb(0,"div",0),n.Lb(1,"div",1),n.Lb(2,"a"),n.Ib(3,"img",2),n.Kb(),n.Lb(4,"div",3),n.Lb(5,"a",4),n.ic(6),n.Kb(),n.Lb(7,"span",5),n.ic(8),n.Vb(9,"date"),n.Kb(),n.Kb(),n.Lb(10,"button",6),n.Sb("click",function(){return e.toggleFavorite(e.article)}),n.Ib(11,"i",7),n.Lb(12,"div",3),n.ic(13),n.Kb(),n.Kb(),n.Kb(),n.Lb(14,"a",8),n.Sb("click",function(){return e.navigateToArticle.emit(e.article.slug)}),n.Lb(15,"h1"),n.ic(16),n.Kb(),n.Lb(17,"p"),n.ic(18),n.Kb(),n.Lb(19,"span"),n.ic(20,"Read more..."),n.Kb(),n.Lb(21,"ul",9),n.hc(22,b,2,1,"li",10),n.Kb(),n.Kb(),n.Kb()),2&t&&(n.xb(3),n.Yb("src",e.article.author.image,n.fc),n.xb(2),n.Yb("routerLink",n.ac(12,u,e.article.author.username)),n.xb(1),n.kc(" ",e.article.author.username," "),n.xb(2),n.kc(" ",n.Xb(9,9,e.article.createdAt,"longDate")," "),n.xb(2),n.Yb("ngClass",n.bc(14,g,!e.article.favorited,e.article.favorited)),n.xb(3),n.jc(e.article.favoritesCount),n.xb(3),n.jc(e.article.title),n.xb(2),n.jc(e.article.description),n.xb(4),n.Yb("ngForOf",e.article.tagList))},directives:[l.g,a.j,a.k],pipes:[a.e],styles:[""],changeDetection:0}),t})();function d(t,e){if(1&t){const t=n.Mb();n.Lb(0,"app-article-list-item",3),n.Sb("navigateToArticle",function(e){return n.dc(t),n.Ub().navigateToArticle(e)})("unFavorite",function(e){return n.dc(t),n.Ub().unFavorite(e)})("favorite",function(e){return n.dc(t),n.Ub().favorite(e)}),n.Vb(1,"async"),n.Kb()}if(2&t){const t=e.$implicit,i=n.Ub();n.Yb("hidden",n.Wb(1,2,i.isLoading$))("article",t)}}let p=(()=>{class t{constructor(t){this.facade=t}ngOnInit(){this.totalPages$=this.facade.totalPages$,this.articles$=this.facade.articles$,this.listConfig$=this.facade.listConfig$,this.isLoading$=this.facade.isLoading$}favorite(t){this.facade.favorite(t)}unFavorite(t){this.facade.unFavorite(t)}navigateToArticle(t){this.facade.navigateToArticle(t)}setPage(t){this.facade.setPage(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Hb(c.a))},t.\u0275cmp=n.Bb({type:t,selectors:[["app-article-list"]],decls:14,vars:22,consts:[[1,"app-article-preview",3,"hidden"],[3,"hidden","article","navigateToArticle","unFavorite","favorite",4,"ngFor","ngForOf"],[3,"hidden","currentPage","totalPages","setPage"],[3,"hidden","article","navigateToArticle","unFavorite","favorite"]],template:function(t,e){if(1&t&&(n.Lb(0,"div",0),n.Vb(1,"async"),n.ic(2," Loading articles...\n"),n.Kb(),n.Lb(3,"div",0),n.Vb(4,"async"),n.Vb(5,"async"),n.ic(6," No articles are here... yet.\n"),n.Kb(),n.hc(7,d,2,4,"app-article-list-item",1),n.Vb(8,"async"),n.Lb(9,"app-pager",2),n.Sb("setPage",function(t){return e.setPage(t)}),n.Vb(10,"async"),n.Vb(11,"async"),n.Vb(12,"async"),n.Vb(13,"async"),n.Kb()),2&t){let t=null;n.Yb("hidden",!1===n.Wb(1,6,e.isLoading$)),n.xb(3),n.Yb("hidden",n.Wb(4,8,e.isLoading$)||n.Wb(5,10,e.articles$).length>0),n.xb(4),n.Yb("ngForOf",n.Wb(8,12,e.articles$)),n.xb(2),n.Yb("hidden",(null==(t=n.Wb(10,14,e.totalPages$))?null:t.length)<=1||n.Wb(11,16,e.isLoading$))("currentPage",n.Wb(12,18,e.listConfig$).currentPage)("totalPages",n.Wb(13,20,e.totalPages$))}},directives:[a.k,o,f],pipes:[a.b],styles:[".app-article-preview[_ngcontent-%COMP%]{margin-top:1.5em}"],changeDetection:0}),t})()},r9Q6:function(t,e,i){"use strict";i.d(e,"h",function(){return n}),i.d(e,"g",function(){return a}),i.d(e,"d",function(){return r}),i.d(e,"f",function(){return s}),i.d(e,"e",function(){return o}),i.d(e,"a",function(){return l}),i.d(e,"c",function(){return b}),i.d(e,"b",function(){return u}),i.d(e,"i",function(){return g}),i.d(e,"k",function(){return f}),i.d(e,"j",function(){return d});var c=i("l7P3");const n=Object(c.n)("[article-list] SET_LIST_PAGE",Object(c.s)()),a=Object(c.n)("[article-list] SET_LIST_CONFIG",Object(c.s)()),r=Object(c.n)("[article-list] LOAD_ARTICLES"),s=Object(c.n)("[article-list] LOAD_ARTICLES_SUCCESS",Object(c.s)()),o=Object(c.n)("[article-list] LOAD_ARTICLES_FAIL",Object(c.s)()),l=Object(c.n)("[article-list] FAVORITE",Object(c.s)()),b=Object(c.n)("[article-list] FAVORITE_SUCCESS",Object(c.s)()),u=Object(c.n)("[article-list] FAVORITE_FAIL",Object(c.s)()),g=Object(c.n)("[article-list] UNFAVORITE",Object(c.s)()),f=Object(c.n)("[article-list] UNFAVORITE_SUCCESS",Object(c.s)()),d=Object(c.n)("[article-list] UNFAVORITE_FAIL",Object(c.s)())}}]);