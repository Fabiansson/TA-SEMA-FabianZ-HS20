(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{o0Gc:function(e,t,i){"use strict";i.r(t),i.d(t,"ProfileModule",function(){return H});var r=i("CWEr"),n=i("gy9y"),s=i("2Mw2"),c=i("ofXK"),o=i("tyNb"),b=i("9jGm"),a=i("l7P3"),l=i("A47K"),f=i("lJxs"),u=i("fXoL");let p=(()=>{class e{constructor(e){this.apiService=e}getProfile(e){return this.apiService.get("/profiles/"+e).pipe(Object(f.a)(e=>e.profile))}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(l.b))},e.\u0275prov=u.Db({token:e,factory:e.\u0275fac}),e})();var O=i("LRne"),h=i("OQgR"),d=i("5+tZ"),j=i("eIep"),g=i("JIr8"),v=i("bOdf");const L=Object(a.n)("[profile] GET_PROFILE",Object(a.s)()),m=Object(a.n)("[profile] GET_PROFILE_SUCCESS",Object(a.s)()),w=Object(a.n)("[profile] GET_PROFILE_FAIL",Object(a.s)()),y=Object(a.n)("[profile] FOLLOW",Object(a.s)()),$=Object(a.n)("[profile] FOLLOW_SUCCESS",Object(a.s)()),k=Object(a.n)("[profile] FOLLOW_FAIL",Object(a.s)()),F=Object(a.n)("[profile] UNFOLLOW",Object(a.s)()),S=Object(a.n)("[profile] UNFOLLOW_SUCCESS",Object(a.s)()),K=Object(a.n)("[profile] UNFOLLOW_FAIL",Object(a.s)());let P=(()=>{class e{constructor(e,t,i){this.actions$=e,this.actionsService=t,this.profileService=i,this.getProfile$=Object(b.c)(()=>this.actions$.pipe(Object(b.d)(L),Object(h.a)(e=>e.id),Object(d.a)(e=>e.pipe(Object(f.a)(e=>e.id),Object(j.a)(e=>this.profileService.getProfile(e).pipe(Object(f.a)(e=>m({profile:e})),Object(g.a)(e=>Object(O.a)(w({error:e}))))))))),this.follow$=Object(b.c)(()=>this.actions$.pipe(Object(b.d)(y),Object(f.a)(e=>e.id),Object(v.a)(e=>this.actionsService.followUser(e).pipe(Object(f.a)(e=>$({profile:e.profile})),Object(g.a)(e=>Object(O.a)(k({error:e}))))))),this.unFollow$=Object(b.c)(()=>this.actions$.pipe(Object(b.d)(F),Object(f.a)(e=>e.id),Object(v.a)(e=>this.actionsService.unfollowUser(e).pipe(Object(f.a)(e=>S({profile:e.profile})),Object(g.a)(e=>Object(O.a)(K({error:e})))))))}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(b.a),u.Pb(s.a),u.Pb(p))},e.\u0275prov=u.Db({token:e,factory:e.\u0275fac}),e})();const W={username:"",bio:"",image:"",following:!1,loading:!1},I=Object(a.o)("profile"),U=Object(a.p)(W,Object(a.r)(L,(e,t)=>Object.assign(Object.assign({},e),{loading:!0})),Object(a.r)(m,(e,t)=>Object.assign(Object.assign({},t.profile),{loading:!1})),Object(a.r)(w,(e,t)=>W),Object(a.r)($,S,(e,t)=>t.profile));function x(e,t){return U(e,t)}let C=(()=>{class e{constructor(e){this.store=e,this.profile$=this.store.select(I)}follow(e){this.store.dispatch(y({id:e}))}unfollow(e){this.store.dispatch(F({id:e}))}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(a.h))},e.\u0275prov=u.Db({token:e,factory:e.\u0275fac}),e})();var A=i("qm0p");let E=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Bb({type:e,selectors:[["app-profile-articles"]],decls:1,vars:0,template:function(e,t){1&e&&u.Ib(0,"app-article-list")},directives:[A.a],styles:[""],changeDetection:0}),e})(),V=(()=>{class e{constructor(e){this.store=e}resolve(e,t){this.store.dispatch(L({id:e.params.username}))}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(a.h))},e.\u0275prov=u.Db({token:e,factory:e.\u0275fac}),e})(),D=(()=>{class e{constructor(e){this.store=e}resolve(e,t){const i=e.params.username;this.store.dispatch(r.d({config:Object.assign(Object.assign({},r.c.listConfig),{filters:Object.assign(Object.assign({},r.c.listConfig.filters),{author:i})})}))}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(a.h))},e.\u0275prov=u.Db({token:e,factory:e.\u0275fac}),e})(),_=(()=>{class e{constructor(e){this.store=e}resolve(e,t){const i=e.parent.params.username;this.store.dispatch(r.d({config:Object.assign(Object.assign({},r.c.listConfig),{filters:Object.assign(Object.assign({},r.c.listConfig.filters),{favorited:i})})}))}}return e.\u0275fac=function(t){return new(t||e)(u.Pb(a.h))},e.\u0275prov=u.Db({token:e,factory:e.\u0275fac}),e})();var R=i("XNiG"),G=i("itXk"),Y=i("vkgz"),N=i("1G5W");const J=function(e,t){return{"btn-outline-secondary":e,"btn-secondary":t}},X=function(){return["/settings"]},Z=function(e){return["/profile",e]},M=function(){return{exact:!0}},T=function(e){return["/profile",e,"favorites"]};let B=(()=>{class e{constructor(e,t){this.facade=e,this.authFacade=t,this.isUser$=new R.a,this.unsubscribe$=new R.a}ngOnInit(){this.profile$=this.facade.profile$,this.currentUser$=this.authFacade.user$,Object(G.b)([this.profile$,this.currentUser$]).pipe(Object(Y.a)(([e,t])=>{this.username=e.username,this.following=e.following}),Object(f.a)(([e,t])=>e.username===t.username),Object(N.a)(this.unsubscribe$)).subscribe(e=>this.isUser$.next(e))}toggleFollowing(){this.following?this.facade.unfollow(this.username):this.facade.follow(this.username)}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return e.\u0275fac=function(t){return new(t||e)(u.Hb(C),u.Hb(n.a))},e.\u0275cmp=u.Bb({type:e,selectors:[["app-profile"]],decls:40,vars:48,consts:[[1,"profile-page"],[1,"user-info"],[1,"container"],[1,"row"],[1,"col-xs-12","col-md-10","offset-md-1"],[1,"user-img",3,"src"],[3,"hidden"],[1,"btn","btn-sm","action-btn",3,"hidden","ngClass","click"],[1,"ion-plus-round"],[1,"btn","btn-sm","btn-outline-secondary","action-btn",3,"routerLink","hidden"],[1,"ion-gear-a"],[1,"articles-toggle"],[1,"nav","nav-pills","outline-active"],[1,"nav-item"],["routerLinkActive","active",1,"nav-link",3,"routerLink","routerLinkActiveOptions"]],template:function(e,t){if(1&e&&(u.Lb(0,"div",0),u.Lb(1,"div",1),u.Lb(2,"div",2),u.Lb(3,"div",3),u.Lb(4,"div",4),u.Ib(5,"img",5),u.Vb(6,"async"),u.Lb(7,"h4",6),u.Vb(8,"async"),u.ic(9),u.Vb(10,"async"),u.Kb(),u.Lb(11,"p"),u.ic(12),u.Vb(13,"async"),u.Kb(),u.Lb(14,"button",7),u.Sb("click",function(){return t.toggleFollowing()}),u.Vb(15,"async"),u.Vb(16,"async"),u.Vb(17,"async"),u.Ib(18,"i",8),u.ic(19),u.Vb(20,"async"),u.Vb(21,"async"),u.Kb(),u.Lb(22,"a",9),u.Vb(23,"async"),u.Ib(24,"i",10),u.ic(25," Edit Profile Settings "),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Lb(26,"div",2),u.Lb(27,"div",3),u.Lb(28,"div",4),u.Lb(29,"div",11),u.Lb(30,"ul",12),u.Lb(31,"li",13),u.Lb(32,"a",14),u.Vb(33,"async"),u.ic(34,"My Articles"),u.Kb(),u.Kb(),u.Lb(35,"li",13),u.Lb(36,"a",14),u.Vb(37,"async"),u.ic(38,"Favorited Articles"),u.Kb(),u.Kb(),u.Kb(),u.Kb(),u.Ib(39,"router-outlet"),u.Kb(),u.Kb(),u.Kb(),u.Kb()),2&e){let e=null,i=null,r=null;u.xb(5),u.Yb("src",null==(e=u.Wb(6,14,t.profile$))?null:e.image,u.fc),u.xb(2),u.Yb("hidden",u.Wb(8,16,t.profile$).loading),u.xb(2),u.kc(" ",null==(i=u.Wb(10,18,t.profile$))?null:i.username," "),u.xb(3),u.jc(null==(r=u.Wb(13,20,t.profile$))?null:r.bio),u.xb(2),u.Yb("hidden",u.Wb(15,22,t.isUser$))("ngClass",u.bc(38,J,!u.Wb(16,24,t.profile$).following,u.Wb(17,26,t.profile$).following)),u.xb(5),u.lc(" \xa0 ",u.Wb(20,28,t.profile$).following?"Unfollow":"Follow"," ",u.Wb(21,30,t.profile$).username," "),u.xb(3),u.Yb("routerLink",u.Zb(41,X))("hidden",!1===u.Wb(23,32,t.isUser$)),u.xb(10),u.Yb("routerLink",u.ac(42,Z,u.Wb(33,34,t.profile$).username))("routerLinkActiveOptions",u.Zb(44,M)),u.xb(4),u.Yb("routerLink",u.ac(45,T,u.Wb(37,36,t.profile$).username))("routerLinkActiveOptions",u.Zb(47,M))}},directives:[c.j,o.g,o.f,o.i],pipes:[c.b],styles:[""],changeDetection:0}),e})(),H=(()=>{class e{}return e.\u0275mod=u.Fb({type:e}),e.\u0275inj=u.Eb({factory:function(t){return new(t||e)},providers:[P,p,V,D,_,C],imports:[[c.c,r.b,s.b,o.h.forChild([{path:"",component:B,resolve:{ProfileResolverService:V},canActivate:[n.b],children:[{path:"",component:E,resolve:{ProfileArticlesResolverService:D}},{path:"favorites",component:E,resolve:{ProfileFavoritesResolverService:_}}]}]),a.j.forFeature("profile",x,{initialState:W}),b.b.forFeature([P])]]}),e})()}}]);